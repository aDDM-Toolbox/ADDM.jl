<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting started with ADDM.jl · ADDM.jl</title><meta name="title" content="Getting started with ADDM.jl · ADDM.jl"/><meta property="og:title" content="Getting started with ADDM.jl · ADDM.jl"/><meta property="twitter:title" content="Getting started with ADDM.jl · ADDM.jl"/><meta name="description" content="Documentation for ADDM.jl."/><meta property="og:description" content="Documentation for ADDM.jl."/><meta property="twitter:description" content="Documentation for ADDM.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="ADDM.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ADDM.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>Getting started with ADDM.jl</a><ul class="internal"><li><a class="tocitem" href="#Load-package"><span>Load package</span></a></li><li><a class="tocitem" href="#Parameter-recovery-on-simulated-data"><span>Parameter recovery on simulated data</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../apireference/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Getting started with ADDM.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting started with ADDM.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/aDDM-Toolbox/ADDM.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/main/docs/src/tutorials/getting_started.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-started-with-ADDM.jl"><a class="docs-heading-anchor" href="#Getting-started-with-ADDM.jl">Getting started with ADDM.jl</a><a id="Getting-started-with-ADDM.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started-with-ADDM.jl" title="Permalink"></a></h1><h2 id="Load-package"><a class="docs-heading-anchor" href="#Load-package">Load package</a><a id="Load-package-1"></a><a class="docs-heading-anchor-permalink" href="#Load-package" title="Permalink"></a></h2><pre><code class="language-julia hljs">using ADDM</code></pre><h2 id="Parameter-recovery-on-simulated-data"><a class="docs-heading-anchor" href="#Parameter-recovery-on-simulated-data">Parameter recovery on simulated data</a><a id="Parameter-recovery-on-simulated-data-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-recovery-on-simulated-data" title="Permalink"></a></h2><h3 id="Define-model"><a class="docs-heading-anchor" href="#Define-model">Define model</a><a id="Define-model-1"></a><a class="docs-heading-anchor-permalink" href="#Define-model" title="Permalink"></a></h3><pre><code class="language-julia hljs">MyModel = ADDM.define_model(d = 0.007, σ = 0.03, θ = .6, barrier = 1, 
                decay = 0, nonDecisionTime = 100, bias = 0.0)</code></pre><h3 id="Define-stimuli"><a class="docs-heading-anchor" href="#Define-stimuli">Define stimuli</a><a id="Define-stimuli-1"></a><a class="docs-heading-anchor-permalink" href="#Define-stimuli" title="Permalink"></a></h3><p>This should be of type <code>NamedTuple</code> with required field names (case sensitive): <code>valueLeft</code> and <code>valueRight</code> </p><p><strong>Option 1: Read in from CSV</strong>  </p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Note that the <code>CSV</code> and <code>DataFrames</code> modules must be loaded beforehand. These are dependencies for the ADDM module <em>but</em> the precompiled module gives access to these dependencies only in the scope of ADDM. In other words, <code>ADDM.load_data_from_csv</code> that requires both of these packages would still work but the code below would not without importing these modules to the current interactive scope.    </p></div></div><pre><code class="language-julia hljs">using CSV
using DataFrames

fn = &quot;./data/stims.csv&quot;
tmp = DataFrame(CSV.File(fn, delim=&quot;,&quot;))
MyStims = (valueLeft = tmp.valueLeft, valueRight = tmp.valueRight)</code></pre><p><strong>Option 2: Create random stimuli</strong></p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If you&#39;re going to create random stimuli you should make sure to have value differences that correspond to what you plan to fit in for fixation data.</p></div></div><pre><code class="language-julia hljs">Random.seed!(38535)
MyStims = (valueLeft = randn(1000), valueRight = randn(1000))</code></pre><h3 id="Define-fixationData"><a class="docs-heading-anchor" href="#Define-fixationData">Define fixationData</a><a id="Define-fixationData-1"></a><a class="docs-heading-anchor-permalink" href="#Define-fixationData" title="Permalink"></a></h3><p>Fixation information that will be fed in to the model for simulations should be of type <a href="https://addm-toolbox.github.io/ADDM.jl/dev/apireference/#Fixation-data"><code>FixationData</code></a>. This type organizes empirical fixations to distributions conditional on fixation type (first, second etc.) and value difference.</p><p>This organizes both the behavioral and the fixation data as a dictionary of Trial objects indexed by subject</p><pre><code class="language-julia hljs">data = ADDM.load_data_from_csv(&quot;./data/expdata.csv&quot;, &quot;./data/fixations.csv&quot;)</code></pre><p>Extract value difference information from the dataset to use in processing the fixations</p><pre><code class="language-julia hljs">vDiffs = sort(unique([x.valueLeft - x.valueRight for x in data[&quot;1&quot;]]))</code></pre><p>When simulating an aDDM we need to input fixations. But instead of using the fixation data from any given subject we summarize the empricial data from all subjects as distributions from which the model samples from depending on the value difference and the fixation type (1st, 2nd etc.).</p><pre><code class="language-julia hljs">MyFixationData = ADDM.process_fixations(data, fixDistType=&quot;fixation&quot;, valueDiffs = vDiffs)</code></pre><h3 id="Simulate-data"><a class="docs-heading-anchor" href="#Simulate-data">Simulate data</a><a id="Simulate-data-1"></a><a class="docs-heading-anchor-permalink" href="#Simulate-data" title="Permalink"></a></h3><p>Defining additional arguments for aDDM trial simulator (e.g. fixation data). Note this needs to me a NamedTuple, i.e. must have at least two elements Otherwise it tries to apply <code>iterate</code> to the single element which would likely end with a  <code>MethodError</code>. In this example I specify <code>timeStep</code> and <code>cutoff</code> in addition to the  only required argument without a default <code>fixationData</code> to avoid this.</p><pre><code class="language-julia hljs">MyArgs = (timeStep = 10.0, cutOff = 20000, fixationData = MyFixationData)</code></pre><p>Note that these are <em>positional</em> arguments for code efficiency</p><pre><code class="language-julia hljs">SimData = ADDM.simulate_data(MyModel, MyStims, ADDM.aDDM_simulate_trial, MyArgs)</code></pre><p>Data can also be simulated from <a href="https://addm-toolbox.github.io/ADDM.jl/dev/apireference/#ADDM.convert_to_fixationDist">probability distributions of fixation data</a>.</p><pre><code class="language-julia hljs">MyFixationDist, MyTimeBins = ADDM.convert_to_fixationDist(MyFixationData)

MyBlankFixationData = ADDM.FixationData(MyFixationData.probFixLeftFirst, MyFixationData.latencies, MyFixationData.transitions, Dict())

MyArgs = (fixationData = MyBlankFixationData, fixationDist = MyFixationDist, timeBins = MyTimeBins)

SimData = ADDM.simulate_data(MyModel, MyStims, ADDM.aDDM_simulate_trial, MyArgs)</code></pre><h3 id="Recover-parameters-using-a-grid-search"><a class="docs-heading-anchor" href="#Recover-parameters-using-a-grid-search">Recover parameters using a grid search</a><a id="Recover-parameters-using-a-grid-search-1"></a><a class="docs-heading-anchor-permalink" href="#Recover-parameters-using-a-grid-search" title="Permalink"></a></h3><p>The <code>ADDM.grid_search</code> function computes</p><pre><code class="language-julia hljs">fn = &quot;./data/addm_grid.csv&quot;
tmp = DataFrame(CSV.File(fn, delim=&quot;,&quot;))
param_grid = Dict(pairs(NamedTuple.(eachrow(tmp))))

best_pars, all_nll_df = ADDM.grid_search(SimData, ADDM.aDDM_get_trial_likelihood, param_grid, Dict(:η=&gt;0.0, :barrier=&gt;1, :decay=&gt;0, :nonDecisionTime=&gt;100, :bias=&gt;0.0))</code></pre><p>Examine the sum of negative log likelihoods for each parameter combination.</p><pre><code class="nohighlight hljs">sort!(all_nll_df, [:nll])</code></pre><p>Save data frame containing the negative log likelihood info for all parameter combinations you searched for. </p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Make sure that you have mounted a local directory to your container if you&#39;re working through this tutorial in a docker container. The output path below is the one specified in the installation instructions. You should change it if you want to save your output elsewhere.</p></div></div><pre><code class="nohighlight hljs">output_path = &#39;/home/jovyan/work/all_nll_df.csv&#39;
CSV.write(output_path, all_nll_df)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../../apireference/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Tuesday 19 December 2023 18:04">Tuesday 19 December 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
