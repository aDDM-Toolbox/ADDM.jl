<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · ADDM.jl</title><meta name="title" content="API Reference · ADDM.jl"/><meta property="og:title" content="API Reference · ADDM.jl"/><meta property="twitter:title" content="API Reference · ADDM.jl"/><meta name="description" content="Documentation for ADDM.jl."/><meta property="og:description" content="Documentation for ADDM.jl."/><meta property="twitter:description" content="Documentation for ADDM.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="ADDM.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ADDM.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/01_getting_started/">Getting started with ADDM.jl</a></li><li><a class="tocitem" href="../tutorials/03_empirical_data/">Parameter estimation on empirical data</a></li><li><a class="tocitem" href="../tutorials/04_model_comparison/">Model comparison</a></li></ul></li><li class="is-active"><a class="tocitem" href>API Reference</a><ul class="internal"><li><a class="tocitem" href="#Core-types"><span>Core types</span></a></li><li><a class="tocitem" href="#Fixation-data"><span>Fixation data</span></a></li><li><a class="tocitem" href="#Data-simulation"><span>Data simulation</span></a></li><li><a class="tocitem" href="#Likelihood-computation"><span>Likelihood computation</span></a></li><li><a class="tocitem" href="#Grid-search"><span>Grid search</span></a></li><li><a class="tocitem" href="#Marginal-posteriors"><span>Marginal posteriors</span></a></li><li><a class="tocitem" href="#Helpers"><span>Helpers</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/aDDM-Toolbox/ADDM.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/main/docs/src/apireference.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h1><h2 id="Core-types"><a class="docs-heading-anchor" href="#Core-types">Core types</a><a id="Core-types-1"></a><a class="docs-heading-anchor-permalink" href="#Core-types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.Trial" href="#ADDM.Trial"><code>ADDM.Trial</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Trial(choice, RT, valueLeft, valueRight)</code></pre><p><strong>Arguments</strong></p><p><strong>Required keyword arguments</strong></p><ul><li><code>choice</code>: either -1 (for left item) or +1 (for right item).</li><li><code>RT</code>: response time in milliseconds.</li><li><code>valueLeft</code>: value of the left item.</li><li><code>valueRight</code>: value of the right item.</li></ul><p><strong>Optional</strong></p><ul><li><code>fixItem</code>: list of items fixated during the trial in chronological   order; 1 correponds to left, 2 corresponds to right, and any   other value is considered a transition/blank fixation.</li><li><code>fixTime</code>: list of fixation durations (in milliseconds) in   chronological order.</li><li><code>fixRDV</code>: list of Float64 corresponding to the RDV values at the end of   each fixation in the trial.</li><li><code>uninterruptedLastFixTime</code>: Int64 corresponding to the duration, in   milliseconds, that the last fixation in the trial would have if it   had not been interrupted when a decision was made.</li><li><code>RDV</code>: vector of RDV over time.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; t = Trial(choice = 1, RT = 2145, valueLeft = 1, valueRight = 3)
Trial(1, 2145, 1, 3, #undef, #undef, #undef, #undef, #undef)

julia&gt; t.RT
2145

julia&gt; t.uninterruptedLastFixTime
ERROR: UndefRefError: access to undefined reference
Stacktrace:
 [1] getproperty(x::Trial, f::Symbol)
   @ Base ./Base.jl:37
 [2] top-level scope
   @ REPL[4]:1

julia&gt; t.uninterruptedLastFixTime = 189
189

julia&gt; t
Trial(1, 2145, 1, 3, #undef, #undef, #undef, 189, #undef)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/define_model.jl#L1-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.aDDM" href="#ADDM.aDDM"><code>ADDM.aDDM</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Constructor for model definitions that will contain model parameter and parameter value   mapping. Not intended to be used alone but as part of <code>define_model</code></p><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; MyModel = ADDM.aDDM()
aDDM(Dict{Symbol, Any}())

julia&gt; MyModel.d = 0.005
0.005

julia&gt; MyModel.σ = .06
0.06

julia&gt; MyModel
aDDM(Dict{Symbol, Any}(:σ =&gt; 0.06, :d =&gt; 0.005))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/define_model.jl#L69-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.define_model" href="#ADDM.define_model"><code>ADDM.define_model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">define_model(d, σ, θ = 1, η = 0, barrier = 1, decay = 0, nonDecisionTime = 0, bias = 0.0)</code></pre><p>Create attentional drift diffusion model with parameters described in    Krajbich et al. (2010).</p><p><strong>Arguments</strong></p><p><strong>Required parameters</strong></p><ul><li><code>d</code>: Number, parameter of the model which controls the speed of   integration of the signal.</li><li><code>σ</code>: Number, parameter of the model, standard deviation for the   normal distribution.</li></ul><p><strong>Optional parameters</strong></p><ul><li><code>θ</code>: Float64 Traditionally between 0 and 1, parameter of the model which controls   the attentional discounting. Default at 1 makes it a ddm.</li><li><code>η</code>: Float64 Additive attentional enhancement the attentional discounting.    Default at 0 makes it a ddm.</li><li><code>barrier</code>: positive Int64, boundary separation in each direction from 0. Default at 1.</li><li><code>decay</code>: constant for linear barrier decay at each time step. Default at 0.</li><li><code>nonDecisionTime</code>: non-negative Number, the amount of time in   milliseconds during which processes other than evidence accummulation occurs.    Default at 0.</li><li><code>bias</code>: Number, corresponds to the initial value of the relative decision value   variable. Must be smaller than barrier.</li></ul><p><strong>Todo</strong></p><ul><li>Tests</li><li>Change decay parameter to function instead of scalar</li></ul><p><strong>Example</strong></p><p><code>julia julia&gt; MyModel = define_model(d = .006, σ = 0.05) aDDM(Dict{Symbol, Any}(:nonDecisionTime =&gt; 0, :σ =&gt; 0.05, :d =&gt; 0.006, :bias =&gt; 0.0, :barrier =&gt; 1, :decay =&gt; 0, :θ =&gt; 1.0, :η =&gt; 0.0))</code>`</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/define_model.jl#L98-L135">source</a></section></article><h2 id="Fixation-data"><a class="docs-heading-anchor" href="#Fixation-data">Fixation data</a><a id="Fixation-data-1"></a><a class="docs-heading-anchor-permalink" href="#Fixation-data" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.FixationData" href="#ADDM.FixationData"><code>ADDM.FixationData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FixationData(probFixLeftFirst, latencies, transitions, fixations; 
             fixDistType=&quot;fixation&quot;)</code></pre><p><strong>Arguments:</strong></p><ul><li><code>probFixLeftFirst</code>: Float64 between 0 and 1, empirical probability that   the left item will be fixated first.</li><li><code>latencies</code>: Vector corresponding to the empirical distribution of   trial latencies (delay before first fixation) in milliseconds.</li><li><code>transitions</code>: Vector corresponding to the empirical distribution   of transitions (delays between item fixations) in milliseconds.</li><li><code>fixations</code>: Dict whose indexing is defined according to parameter   fixDistType. Each entry is an array corresponding to the   empirical distribution of item fixation durations in   milliseconds.</li><li><code>fixDistType</code>: String, one of {&#39;simple&#39;, &#39;difficulty&#39;, &#39;fixation&#39;},   determines how the fixation distributions are indexed. If   &#39;simple&#39;, fixation distributions are indexed only by type (1st,   2nd, etc). If &#39;difficulty&#39;, they are indexed by type and by trial   difficulty, i.e., the absolute value for the trial&#39;s value   difference. If &#39;fixation&#39;, they are indexed by type and by the   value difference between the fixated and unfixated items.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/fixation_data.jl#L1-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.process_fixations" href="#ADDM.process_fixations"><code>ADDM.process_fixations</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">process_fixations(data::Dict; timeStep::Number = 10, 
                                 maxFixTime::Number = 3000, 
                                 numFixDists::Int64 = 3, fixDistType::String = &quot;fixation&quot;, 
                                 valueDiffs::Vector{Int64} = collect(-3:1:3), 
                                 subjectIds::Vector{String} = String[])</code></pre><p>Create empirical distributions from the data to be used when generating model simulations.</p><p><strong>Arguments</strong></p><ul><li><code>data</code>: a dict, indexed by subjectId, where each entry is a list of   Trial objects. E.g. output of <code>load_data_from_csv</code></li><li><code>timeStep</code>: integer, minimum duration of a fixation to be considered, in   miliseconds.</li><li><code>maxFixTime</code>: integer, maximum duration of a fixation to be considered, in   miliseconds.</li><li><code>numFixDists</code>: integer, number of fixation types to use in the fixation   distributions. For instance, if numFixDists equals 3, then 3 separate   fixation types will be used, corresponding to the 1st, 2nd and other   (3rd and up) fixations in each trial.</li><li><code>fixDistType</code>: string, one of {&#39;simple&#39;, &#39;difficulty&#39;, &#39;fixation&#39;}, used to   determine how the fixation distributions should be indexed. If   &#39;simple&#39;, then fixation distributions will be indexed only by type   (1st, 2nd, etc). If &#39;difficulty&#39;, they will be indexed by type and by   trial difficulty, i.e., the absolute value for the trial&#39;s value   difference. If &#39;fixation&#39;, they will be indexed by type and by the   value difference between the fixated and unfixated items. Note that    this is not the same as the value difference for the trial. </li><li><code>valueDiffs</code>: list of integers. If fixDistType is &#39;difficulty&#39; or   &#39;fixation&#39;, valueDiffs is a range correspoding to the item values to   be used when indexing the fixation distributions. So if <code>difficulty</code>   make sure to input absolute value differences if that is the measure   of difficulty of the decision.</li><li><code>subjectIds</code>: list of strings corresponding to the subjects whose data   should be used. If not provided, all existing subjects will be used.</li></ul><p><strong>Return</strong></p><ul><li>A FixationData object.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/fixation_data.jl#L41-L80">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.convert_to_fixationDist" href="#ADDM.convert_to_fixationDist"><code>ADDM.convert_to_fixationDist</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">convert_to_fixationDist(fixationData::FixationData; timeStep::Number = 10)</code></pre><p>Create empirical distributions from the data to be used when generating model simulations.</p><p><strong>Arguments</strong></p><ul><li><code>fixationData</code>: FixationData type that is the output of <code>process_fixations</code>.</li><li><code>timeStep</code>: integer, timeBin size in ms.</li></ul><p><strong>Return</strong></p><ul><li><code>fixationDist</code>: Dictionary indexed by value difference and fixation type. Contains the distributions of fixation durations in each time bin specifiu</li><li><code>timeBinMidPoints</code>: Mid points of the time bins, for which the fixation  duration distributions were calculated. Will be the durations sampled in  <code>addm_simulate_trial</code> if using <code>fixationDist</code> instead of <code>fixationData</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/fixation_data.jl#L205-L221">source</a></section></article><h2 id="Data-simulation"><a class="docs-heading-anchor" href="#Data-simulation">Data simulation</a><a id="Data-simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Data-simulation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.aDDM_simulate_trial" href="#ADDM.aDDM_simulate_trial"><code>ADDM.aDDM_simulate_trial</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">aDDM_simulate_trial(model::aDDM, fixationData::FixationData, 
                    valueLeft::Number, valueRight::Number; timeStep::Number=10.0, 
                    numFixDists::Int64=3 , fixationDist=nothing, timeBins=nothing, 
                    cutOff::Number=100000)</code></pre><p>Generate a DDM trial given the item values.</p><p><strong>Arguments</strong></p><ul><li><code>model</code>: aDDM object.</li><li><code>fixationData</code>: FixationData object. <code>Required even when using fixationDist</code> because it specifies latencies and transitions as well.</li><li><code>valueLeft</code>: value of the left item.</li><li><code>valueRight</code>: value of the right item.</li><li><code>timeStep</code>: Number, value in milliseconds to be used for binning   time axis.</li><li><code>numFixDists</code>: Int64, number of fixation types to use in the fixation   distributions. For instance, if numFixDists equals 3, then 3   separate fixation types will be used, corresponding to the 1st,   2nd and other (3rd and up) fixations in each trial.</li><li><code>fixationDist</code>: distribution of fixations which, when provided, will be   used instead of fixationData.fixations. This should be a dict of   dicts of dicts, corresponding to the probability distributions of   fixation durations. Indexed first by fixation type (1st, 2nd, etc),   then by the value difference between the fixated and unfixated    items, then by time bin. Each entry is a number between 0 and 1    corresponding to the probability assigned to the particular time   bin (i.e. given a particular fixation type and value difference,   probabilities for all bins should add up to 1). Can be obtained from   <code>fixationData</code> using <code>convert_to_fixationDist</code>. If using this instead   of <code>fixationData</code> to sample fixations make sure to specify latency and    transition info in <code>fixationData</code>.</li><li><code>timeBins</code>: array containing the time bins used in fixationDist. Can be   obtained from<code>fixationData</code> using <code>convert_to_fixationDist</code></li></ul><p><strong>Returns</strong></p><ul><li>An Trial object resulting from the simulation.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/simulate_data.jl#L1-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.DDM_simulate_trial" href="#ADDM.DDM_simulate_trial"><code>ADDM.DDM_simulate_trial</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">DDM_simulate_trial(model::aDDM, valueLeft::Number, valueRight::Number; timeStep::Number = 10.0, 
                   cutOff::Int64 = 20000)</code></pre><p>Generate a DDM trial given the item values.</p><p><strong>Arguments</strong></p><ul><li><p><code>model</code>: aDDM object.</p></li><li><p><code>valueLeft</code>: value of the left item.</p></li><li><p><code>valueRight</code>: value of the right item.</p></li><li><p><code>timeStep</code>: Number, value in milliseconds to be used for binning the   time axis.</p></li><li><p><code>cutOff</code>: Number, value in milliseconds to be used as a cap if trial   response time is too long.</p><p><strong>Returns</strong></p></li><li><p>A Trial object resulting from the simulation.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/simulate_data.jl#L239-L256">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.simulate_data" href="#ADDM.simulate_data"><code>ADDM.simulate_data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">simulate_data(model::aDDM, stimuli, simulator_fn, simulator_args = (timeStep = 10.0, cutOff = 20000))</code></pre><p>Simulate data using the model for the given stimuli.</p><p><strong>Arguments</strong></p><ul><li><code>model</code>: aDDM object.</li><li><code>stimuli</code>: Named tuple with <code>valueLeft</code> and <code>valueRight</code> specifying the values of options.</li><li><code>simulator_fn</code>: Name of the function that simulates a trial for the given model.</li><li><code>simulator_args</code>: Named tuple containing kwargs that should be fed to <code>simulator_fn</code></li></ul><p><strong>Returns</strong></p><ul><li>Vector of Trial objects containing simulated data.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/simulate_data.jl#L310-L323">source</a></section></article><h2 id="Likelihood-computation"><a class="docs-heading-anchor" href="#Likelihood-computation">Likelihood computation</a><a id="Likelihood-computation-1"></a><a class="docs-heading-anchor-permalink" href="#Likelihood-computation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.aDDM_get_trial_likelihood" href="#ADDM.aDDM_get_trial_likelihood"><code>ADDM.aDDM_get_trial_likelihood</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">aDDM_get_trial_likelihood(;addm::aDDM, trial::Trial, timeStep::Number = 10.0, 
                          stateStep::Number = 0.01)</code></pre><p>Compute the likelihood of the data from a single aDDM trial for these particular aDDM    parameters.</p><p><strong>Arguments:</strong></p><p><strong>Keyword arguments</strong></p><ul><li><code>model</code>: aDDM object.</li><li><code>trial</code>: Trial object.</li><li><code>timeStep</code>: Number, value in milliseconds to be used for binning the   time axis.</li><li><code>stateStep</code>: Number, to be used for binning the RDV axis.</li></ul><p>Returns:</p><ul><li>The likelihood obtained for the given trial and model.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/compute_trial_likelihood.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.DDM_get_trial_likelihood" href="#ADDM.DDM_get_trial_likelihood"><code>ADDM.DDM_get_trial_likelihood</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">DDM_get_trial_likelihood(;ddm::aDDM, trial::Trial, timeStep::Number = 10, 
                         stateStep::Number = 0.01)</code></pre><p>Compute the likelihood of the data from a single DDM trial for these particular DDM parameters.</p><p><strong>Arguments</strong></p><p><strong>Keyword arguments</strong></p><ul><li><code>model</code>: aDDM object.</li><li><code>trial</code>: Trial object.</li><li><code>timeStep</code>: Number, value in milliseconds to be used for binning the   time axis.</li><li><code>stateStep</code>: Number, to be used for binning the RDV axis.</li></ul><p><strong>Returns</strong></p><ul><li>The likelihood obtained for the given trial and model.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/compute_trial_likelihood.jl#L184-L201">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.compute_trials_nll" href="#ADDM.compute_trials_nll"><code>ADDM.compute_trials_nll</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compute_trials_nll(model::aDDM, data, likelihood_fn, likelihood_args = (timeStep = 10.0, cutOff = 20000))</code></pre><p>Compute likelihood of a dataset for a given model.</p><p><strong>Arguments</strong></p><ul><li><code>model</code>: aDDM object. Holds info on the parameter values for the likelihood function.</li><li><code>data</code>: Vector of <code>ADDM.Trial</code> objects. </li><li><code>likelihood_fn</code>: Name of the function that computes the likelhoods of a trial for the given model.</li><li><code>likelihood_args</code>: Named tuple containing kwargs that should be fed to <code>likelihood_fn</code></li><li><code>return_trial_likelihoods</code>: Boolean to specify whether to return the likelihoods for each trial</li><li><code>sequential_model</code>: Boolean to specify if the model requires all data concurrently (e.g. RL-DDM). If <code>true</code> model cannot be multithreaded</li></ul><p><strong>Returns</strong></p><ul><li>Negative log likelihood of data</li><li>(Optional) Dictionary of trial likelihoods keyed by the trial number</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/compute_trial_likelihood.jl#L310-L326">source</a></section></article><h2 id="Grid-search"><a class="docs-heading-anchor" href="#Grid-search">Grid search</a><a id="Grid-search-1"></a><a class="docs-heading-anchor-permalink" href="#Grid-search" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.setup_fit_for_params" href="#ADDM.setup_fit_for_params"><code>ADDM.setup_fit_for_params</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setup_fit_for_params(fixed_params, likelihood_fn, cur_grid_params, likelihood_fn_module=Main)</code></pre><p>Return parameter container and likelihood function for given parameter combination.</p><p><strong>Arguments</strong></p><ul><li><code>fixed_params</code>: Model parameters that are fixed to a value and not fitted.</li><li><code>likelihood_fn</code>: Name of likelihood function.</li><li><code>cur_grid_params</code>: NamedTuple containing the parameter combination</li><li><code>likelihood_fn_module</code>: Default <code>Main</code>. Module where the likelihood function is defined.</li></ul><p><strong>Returns</strong></p><ul><li><code>model</code>: Container holding parameter combination info.</li><li><code>likelihood_fn</code>: Likelihood function that computes trial likelihoods for a given parameter combination.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/grid_search.jl#L1-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.get_trial_posteriors" href="#ADDM.get_trial_posteriors"><code>ADDM.get_trial_posteriors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_trial_posteriors(param_grid, model_priors, trial_likelihoods)</code></pre><p>Compute model posteriors after each trial given model priors and trialwise likelihoods.</p><p><strong>Arguments</strong></p><ul><li><code>param_grid</code>: Vector of NamedTuples defining parameter space.</li><li><code>model_priors</code>: Dictionary with parameter combinations as keys and prior model probability as values.</li><li><code>trial_likelihoods</code>: Nested dictionary with outer keys of parameter combinations, inner keys of trial numbers, and values of trial likelihoods.</li></ul><p><strong>Returns</strong></p><ul><li><code>trial_posteriors</code>: Nested dictionary with outer keys of parameter combinations, inner keys of trial numbers, and values of model posterior probabilities after each observation.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/grid_search.jl#L50-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.save_intermediate_likelihoods_fn" href="#ADDM.save_intermediate_likelihoods_fn"><code>ADDM.save_intermediate_likelihoods_fn</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">save_intermediate_likelihoods(trial_likelihoods_for_grid_params, cur_grid_params, save_path)</code></pre><p>Write out trial likelihoods as soon as they are computed for a given parameter combination. Intended   to be used when running a large parameter grid and worried that job might fail unexpectedly. Saved   trial likelihoods can later be read in to compute posteriors if necessary.</p><p><strong>Arguments</strong></p><ul><li><code>trial_likelihoods_for_grid_params</code>: Dictionary with keys of trial numbers and values of likelihoods for <code>cur_grid_params</code>.</li><li><code>cur_grid_params</code>: parameter combination, for which the likelihoods are being saved. NamedTuple entry in  <code>param_grid</code>.</li><li><code>save_path</code>: Path to save the intermediate output. Default to <code>&quot;./outputs&quot;</code> which saves output to directory from which the function is run (creates it if needed). </li><li><code>fn</code>: File name for the saved output. &quot;.csv&quot; will be appended to this string.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/grid_search.jl#L112-L128">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.match_param_grid_keys" href="#ADDM.match_param_grid_keys"><code>ADDM.match_param_grid_keys</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">match_param_grid_keys(param_grid)</code></pre><p>If param<em>grid contains models with different parameter names, ensure all entries in    param</em>grid have the same names and assigns a &quot;NA&quot; if that parameter names does not exist for   a given model.</p><p><strong>Arguments</strong></p><ul><li><code>param_grid</code>: Vector of NamedTuples with parameter names as keys and parameter values as values.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/grid_search.jl#L156-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.get_mle" href="#ADDM.get_mle"><code>ADDM.get_mle</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_mle(all_nll, likelihood_args)</code></pre><p>Extract maximum likelihood estimate from <code>all_nll</code></p><p><strong>Arguments</strong></p><ul><li><code>all_nll</code>: Dictionary containing parameter combinations as keys and sum of negative log likelihoods   as values.</li><li><code>likelihood_args</code>: NamedTuple containing step size info.</li></ul><p><strong>Return</strong></p><ul><li><code>best_pars</code>: MLE amongst the parameter combinations tried in <code>all_nll</code> for step sizes specified in  <code>likelihood_args</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/grid_search.jl#L206-L221">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.grid_search" href="#ADDM.grid_search"><code>ADDM.grid_search</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">grid_search(data, param_grid, likelihood_fn = nothing, 
            fixed_params = Dict(:θ=&gt;1.0, :η=&gt;0.0, :barrier=&gt;1, :decay=&gt;0, :nonDecisionTime=&gt;0, :bias=&gt;0.0); 
            likelihood_args = (timeStep = 10.0, stateStep = 0.01), 
            model_priors = nothing,
            likelihood_fn_module = Main,
            sequential_model = false,
            grid_search_exec = ThreadedEx(),
            compute_trials_exec = ThreadedEx(),
            return_grid_nlls = false,
            return_model_posteriors = false,
            return_trial_posteriors = false,
            save_intermediate_likelihoods = false,
            noise_param_name = &quot;sigma&quot;)</code></pre><p>Compute the likelihood of either observed or simulated data for all parameter combinations in <code>param_grid</code>.</p><p><strong>Arguments</strong></p><p><strong>Required</strong></p><ul><li><code>data</code>: Data for which the sum of negative log likelihoods will be computed for each trial. Should be a vector of <code>ADDM.Trial</code> objects.</li><li><code>param_grid</code>: Parameter combinations for which the sum of nll&#39;s for the <code>data</code> is  computed. Vector of NamedTuples. E.g. ```</li></ul><p>15-element Vector{@NamedTuple{d::Float64, sigma::Float64, theta::Float64, likelihood<em>fn::String}}:   (d = 0.001, sigma = 0.01, theta = 0.12, likelihood</em>fn = &quot;ADDM.aDDM<em>get</em>trial<em>likelihood&quot;)   (d = 0.002, sigma = 0.01, theta = 0.12, likelihood</em>fn = &quot;ADDM.aDDM<em>get</em>trial_likelihood&quot;)   ...  ```</p><ul><li><code>likelihood_fn</code>: Name of likelihood function to be used to compute likelihoods.  The toolbox has <code>ADDM.aDDM_get_trial_likelihood</code> and <code>ADDM.DDM_get_trial_likelihood</code> defined. If comparing different generative processes then leave at default value of <code>nothing</code> and make sure to define a <code>likelihood_fn</code> in the <code>param_grid</code>.</li><li><code>fixed_params</code>: Default <code>Dict(:θ=&gt;1.0, :η=&gt;0.0, :barrier=&gt;1, :decay=&gt;0, :nonDecisionTime=&gt;0, :bias=&gt;0.0)</code>. Parameters required by the <code>likelihood_fn</code> that are not specified to vary across likelihood  computations.</li><li><code>likelihood_args</code>: Default <code>(timeStep = 10.0, stateStep = 0.01)</code>. Additional  arguments to be passed onto <code>likelihood_fn</code>. </li></ul><p><strong>Optional</strong></p><ul><li><code>model_priors</code>: priors for each model probability if not assummed to be uniform. Should be specified as a <code>Dict</code> with values of probabilities matching the keys for the parameter combinations specified in <code>param_grid</code>.</li><li><code>likelihood_fn_module</code>: Default <code>Main</code>. Scope from which to pull the likelihood function. Default works for custom functions defined inline or in a script, as well as, the built-in functions.</li><li><code>sequential_model</code>: Boolean to specify if the model requires all data concurrently (e.g. RL-DDM). If <code>true</code>  likelihood computation for model cannot be multithreaded (though grid search still can be).</li><li><code>grid_search_exec</code>: Executor used by <code>FLoops.jl</code> to parallelize computation of nll for each parameter  combination over threads. Default is <code>ThreadedEx()</code>. Other options are <code>DistributedEx()</code> and <code>SequentialEx()</code>. See <code>FLoops.jl</code> documentation for more details.</li><li><code>compute_trials_exec</code>: Executor used by <code>FLoops.jl</code> to parallelize computation of each trial&#39;s likelihood over threads. Default is <code>ThreadedEx()</code>. Other options are <code>DistributedEx()</code> and <code>SequentialEx()</code>. See <code>FLoops.jl</code>  documentation for more details.</li><li><code>return_grid_nlls</code>: Default <code>false</code>. If true, will return a <code>DataFrame</code> containing the sum of nll&#39;s for  each parameter combination in the grid search.</li><li><code>return_model_posteriors</code>: Default <code>false</code>. If true, will return the posterior probability  for each parameter combination in <code>param_grid</code>.</li><li><code>return_trial_posteriors</code>: Default <code>false</code>. If true, will return the posterior probability  for each parameter combination in <code>param_grid</code> after each trial in <code>data</code>.  </li><li><code>save_intermediate_likelihoods</code>: Default <code>false</code>. If true, will crate a csv containing the likelihoods for each  trial after it is computed for a given parameter combination. Could be useful if doing a large parameter sweep  and are worried about the job terminating unexpectedly. Job could be restarted for parameter combinations, for  which the trial likelihoods have not been saved, instead of all parameter combinations. </li><li><code>noise_param_name</code>: Default <code>&quot;sigma&quot;</code>. String specifying the name of the noise parameter in the model. Used  to check stability criterion for Forward Euler.</li></ul><p><strong>Returns</strong></p><ul><li><code>output</code>: <code>Dict</code> with keys:<ul><li><code>best_pars</code>: <code>Dict</code> containing the parameter combination with the lowest nll.</li><li><code>grid_nlls</code>: (Optional) <code>DataFrame</code> containing sum of nll&#39;s for each parameter combination.</li><li><code>trial_posteriors</code>: (Optional) Posterior probability for each parameter combination after each trial.</li><li><code>model_posteriors</code>: (Optional) Posterior probability for each parameter combination after all trials.</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/grid_search.jl#L236-L312">source</a></section></article><h2 id="Marginal-posteriors"><a class="docs-heading-anchor" href="#Marginal-posteriors">Marginal posteriors</a><a id="Marginal-posteriors-1"></a><a class="docs-heading-anchor-permalink" href="#Marginal-posteriors" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.marginal_posteriors" href="#ADDM.marginal_posteriors"><code>ADDM.marginal_posteriors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">marginal_posteriors(posteriors_dict, two_d_marginals)</code></pre><p>Compute the marginal posterior distributions for the fitted parameters specified in <code>param_grid</code>.</p><p><strong>Arguments</strong></p><p><strong>Required</strong></p><ul><li><code>posteriors_dict</code>: Dictionary of posterior model probabilities. Keys of this dictionary are  the parameter combinations specified in <code>param_grid</code>. Values are the posterior probabilties  after accounting for each observation.</li><li><code>two_d_marginals</code>: Boolean. Whether to compute posteriors to plot heatmaps of posteriors. Default is false.</li></ul><p><strong>Returns</strong></p><ul><li>Vector of <code>DataFrame</code>s. If <code>two_d_marginals</code> is false, return only dataframes containing posteriors for each parameter. Otherwise, also includes posteriors for pairwise combinations of  parameters as well.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/marginal_posteriors.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.marginal_posterior_plot" href="#ADDM.marginal_posterior_plot"><code>ADDM.marginal_posterior_plot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">marginal_posterior_plot</code></pre><p>This plot type shows the posteriors for each parameter individually,     as well as the posterior probabilities of pairwise combinations.  </p><p>The input is an array of dataframes resulting from <code>ADDM.marginal_posteriors</code>   with the third positional argument set to true.</p><pre><code class="nohighlight hljs">best_pars, nll_df, model_posteriors = ADDM.grid_search(subj_data, ADDM.aDDM_get_trial_likelihood, param_grid, 
    Dict(:η=&gt;0.0, :barrier=&gt;1, :decay=&gt;0, :nonDecisionTime=&gt;0, :bias=&gt;0.0), 
    likelihood_args=my_likelihood_args, 
    return_model_posteriors = true)

ADDM.marginal_posteriors(param_grid, model_posteriors, true)</code></pre><p>Recipe modified from  https://github.com/JuliaPlots/StatsPlots.jl/blob/master/src/corrplot.jl</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/marginal_posteriors.jl#L61-L81">source</a></section></article><h2 id="Helpers"><a class="docs-heading-anchor" href="#Helpers">Helpers</a><a id="Helpers-1"></a><a class="docs-heading-anchor-permalink" href="#Helpers" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.load_data_from_csv" href="#ADDM.load_data_from_csv"><code>ADDM.load_data_from_csv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_data_from_csv(expdataFileName, fixationsFileName; stimsOnly = false)</code></pre><p>Load experimental data from two CSV files: an experimental data file and a fixations file. Format expected for experimental data file: parcode, trial, rt, choice, item<em>left, item</em>right. Format expected for fixations file: parcode, trial, fix<em>item, fix</em>time.</p><p><strong>Arguments</strong></p><p><strong>Positional</strong></p><ul><li><code>expdataFileName</code>: String, name of experimental data file.</li><li><code>fixationsFileName</code>: String, name of fixations file.<ul><li><code>parcode</code>: Subject identifier</li><li><code>trial</code>: Trial number</li><li><code>fix_item</code>: Fixation location. 0 = transition, 1 = left, 2 = right,</li></ul>3 = latency.<ul><li><code>fix_time</code>: Fixation duration.</li></ul></li></ul><p><strong>Keyword</strong></p><ul><li><code>stimsOnly</code>: Boolean, true if <code>expdataFileName</code> contains only stimuli info and no choice or rt info.</li></ul><p><strong>Return</strong></p><p>A dict, indexed by subjectId, where each entry is a list of Trial       objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/util.jl#L1-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ADDM.convert_param_text_to_symbol" href="#ADDM.convert_param_text_to_symbol"><code>ADDM.convert_param_text_to_symbol</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">convert_param_text_to_symbols(model)</code></pre><p>Convert parameter names that are specified in text into greek/latex symbols. Used by <code>ADDM.grid_search</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aDDM-Toolbox/ADDM.jl/blob/ebb097cfef65b07be37636005e26919473091da1/src/util.jl#L110-L114">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorials/04_model_comparison/">« Model comparison</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.0 on <span class="colophon-date" title="Tuesday 30 April 2024 20:10">Tuesday 30 April 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
